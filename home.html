<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
  <script src="pixi.min.js"></script>
  <script src="https://unpkg.com/pixi-charm/dist/charm.min.js"></script>
  <script src="charm.js"></script>
<body>
  <script type="text/javascript">
    // let type = "WebGL"
    // if(!PIXI.utils.isWebGLSupported()){
    //   type = "canvas"
    // }

    // PIXI.utils.sayHello(type)
    let app = new PIXI.Application({ 
    width: 650,         // default: 800
    height: 650,        // default: 600
    antialias: true,    // default: false
    transparent: false, // default: false
    resolution: 1       // default: 1
  }

);
let c = new Charm(PIXI);
let tween,red,green,yellow,blue;
document.body.appendChild(app.view);
app.renderer.backgroundColor = "white";
PIXI.loader
  .add([
    "images/red.png",
    "images/blue.png",
    "images/yellow.jpg",
    "images/green.png"
  ])
  .load(setup);


//This `setup` function will run when the image has loaded
let map = new Map();
red = new PIXI.Sprite(PIXI.loader.resources["images/red.png"].texture);
blue = new PIXI.Sprite(PIXI.loader.resources["images/blue.png"].texture);
yellow = new PIXI.Sprite(PIXI.loader.resources["images/yellow.jpg"].texture);
green = new PIXI.Sprite(PIXI.loader.resources["images/green.png"].texture);

function setup() {

//Create the `cat` sprite
 
red = new PIXI.Sprite(PIXI.loader.resources["images/red.png"].texture);
blue = new PIXI.Sprite(PIXI.loader.resources["images/blue.png"].texture);
yellow = new PIXI.Sprite(PIXI.loader.resources["images/yellow.jpg"].texture);
green = new PIXI.Sprite(PIXI.loader.resources["images/green.png"].texture);
//Change the sprite's position
console.log(red)
red.x = 0;
red.y = 0;

//Change the sprite's size
red.width = 256;
red.height = 256;

//Add the cat to the stage so you can see it
app.stage.addChild(red);
 
//Change the sprite's position
blue.x = 306;
blue.y = 0;

//Change the sprite's size
blue.width = 256;
blue.height = 256;

//Add the cat to the stage so you can see it
app.stage.addChild(blue);

 

//Change the sprite's position
yellow.x = 0;
yellow.y = 306;

//Change the sprite's size
yellow.width = 256;
yellow.height = 256;

//Add the cat to the stage so you can see it
app.stage.addChild(yellow);
 
//Change the sprite's position
green.x = 306;
green.y = 306;

//Change the sprite's size
green.width = 256;
green.height = 256;

//Add the cat to the stage so you can see it
app.stage.addChild(green);
map.set(1, red);     
map.set(2, blue); 
map.set(3, green);     
map.set(4, yellow); 
red.interactive = true;
red.on('mousedown', onDown);
red.on('mouseup', onUp);
red.on('touchstart', onDown1);
blue.interactive = true;
blue.on('mousedown', onDown1);
blue.on('mouseup', onUp1);
blue.on('touchstart', onDown1);
green.interactive = true;
green.on('mousedown', onDown2);
green.on('mouseup', onUp2);
green.on('touchstart', onDown2);
yellow.interactive = true;
yellow.on('mousedown', onDown3);
yellow.on('mouseup', onUp3);
yellow.on('touchstart', onDown3);

}

function loadProgressHandler() {
  console.log("loading"); 
}
var time =1;
var count=time;
// function animate(cnt)
// {
//   while(cnt!=0)
//   {
//     let value=Math.floor(Math.random() * 4)+1;
//     if(value==1)
//     {
//       console.log(red)
//       c.fadeOut(red);
//       c.fadeIn(red);
//     } 
//     else if(value==2)
//     {
//       c.fadeOut(blue);
//       c.fadeIn(blue);
//     } 
//     else if(value==3)
//     {
//       c.fadeOut(green);
//       c.fadeIn(green);
//     } 
//     else{
//       c.fadeOut(yellow);
//       c.fadeIn(yellow);
//     }
//     requestAnimationFrame(animate);

//   //Update charm
//     c.update();
//   }

// }
// animate()//animate(count);
play();
function play(){
      requestAnimationFrame(play)
    // render the root container
    app.renderer.render(app.stage);
    //setTimeout(play, 1000);
    }


function onDown (eventData) {
red.alpha=0.5
}
function onDown1 (eventData) {

  blue.alpha=0.5
}
function onDown2 (eventData) {
  green.alpha=0.5
}
function onDown3 (eventData) {
  yellow.alpha=0.5
}
function onUp (eventData) {
red.alpha=1;
count--;
check(count);
}
function onUp1 (eventData) {
  blue.alpha=1;
  count--;
  check(count);
}
function onUp2 (eventData) {
  green.alpha=1;
  count--;
  check(count);
}
function onUp3 (eventData) {
  yellow.alpha=1;
  count--;
  check(count);
}
function check(couunt){
  if(count<=0)
  {
    console.log("Round", time, "done");
    time++;
    count=time;
    //animate(count)
  }
}


  </script>
</body>
</html>