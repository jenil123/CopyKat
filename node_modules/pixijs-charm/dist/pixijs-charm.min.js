!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("pixi.js"),require("es6-shim")):"function"==typeof define&&define.amd?define("pixijs-charm",["pixi.js","es6-shim"],t):"object"==typeof exports?exports["pixijs-charm"]=t(require("pixi.js"),require("es6-shim")):e["pixijs-charm"]=t(e["pixi.js"],e["es6-shim"])}(this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2),n(3);var o=function(){function e(e){if(void 0===e&&(e=PIXI),void 0===e)throw new Error("Please assign a rendering engine in the constructor before using charm.js");this.renderer="",e.particles.ParticleContainer&&e.Sprite&&(this.renderer="pixi"),this.globalTweens=[],this.easingFormulas={linear:function(e){return e},smoothstep:function(e){return e*e*(3-2*e)},smoothstepSquared:function(e){return Math.pow(e*e*(3-2*e),2)},smoothstepCubed:function(e){return Math.pow(e*e*(3-2*e),3)},acceleration:function(e){return e*e},accelerationCubed:function(e){return Math.pow(e*e,3)},deceleration:function(e){return 1-Math.pow(1-e,2)},decelerationCubed:function(e){return 1-Math.pow(1-e,3)},sine:function(e){return Math.sin(e*Math.PI/2)},sineSquared:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},sineCubed:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},inverseSine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},inverseSineSquared:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),2)},inverseSineCubed:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),3)},spline:function(e,t,n,o,r){return.5*(2*n+(-t+o)*e+(2*t-5*n+4*o-r)*e*e+(3*n-t-3*o+r)*e*e*e)},cubicBezier:function(e,t,n,o,r){var a=e*e;return t+(3*-t+e*(3*t-t*e))*e+(3*n+e*(-6*n+3*n*e))*e+(3*o-3*o*e)*a+r*(a*e)}}}return e.prototype.tweenProperty=function(e){var t=this;e.type=void 0==e.type?"smoothstep":e.type,e.yoyo=void 0!=e.yoyo&&e.yoyo,e.delayBeforeRepeat=void 0==e.delayBeforeRepeat?0:e.delayBeforeRepeat;var n={},o=e.type.split(" ");return"bounce"===o[0]&&(n.startMagnitude=parseInt(o[1],10),n.endMagnitude=parseInt(o[2],10)),n.start=function(o,r){n.startValue=JSON.parse(JSON.stringify(o)),n.endValue=JSON.parse(JSON.stringify(r)),n.playing=!0,n.totalFrames=e.totalFrames,n.frameCounter=0,t.globalTweens.push(n)},n.start(e.startValue,e.endValue),n.update=function(){var r;if(n.playing)if(n.frameCounter<n.totalFrames){var a=n.frameCounter/n.totalFrames;r="bounce"!==o[0]?t.easingFormulas[e.type](a):t.easingFormulas.spline(a,n.startMagnitude,0,1,n.endMagnitude),e.displayObject[e.property]=n.endValue*r+n.startValue*(1-r),n.frameCounter+=1}else e.displayObject[e.property]=n.endValue,n.end()},n.end=function(){n.playing=!1,n.onCompleted&&n.onCompleted(),t.globalTweens.splice(t.globalTweens.indexOf(n),1),e.yoyo&&t.wait(e.delayBeforeRepeat).then(function(){n.start(n.endValue,n.startValue)})},n.play=function(){return n.playing=!0},n.pause=function(){return n.playing=!1},n},e.prototype.makeTween=function(e){var t=this,n={};n.tweens=[],e.forEach(function(e){var o=t.tweenProperty(e);n.tweens.push(o)});var o=0;return n.tweens.forEach(function(e){e.onCompleted=function(){(o+=1)===n.tweens.length&&(n.onCompleted&&n.onCompleted(),o=0)}}),n.pause=function(){n.tweens.forEach(function(e){e.playing=!1})},n.play=function(){n.tweens.forEach(function(e){e.playing=!0})},n},e.prototype.fadeOut=function(e,t){return void 0===t&&(t=60),this.tweenProperty({displayObject:e,endValue:0,property:"alpha",startValue:e.alpha,totalFrames:t,type:"sine"})},e.prototype.fadeIn=function(e,t){return void 0===t&&(t=60),this.tweenProperty({displayObject:e,endValue:1,property:"alpha",startValue:e.alpha,totalFrames:t,type:"sine"})},e.prototype.pulse=function(e,t,n){return void 0===t&&(t=60),void 0===n&&(n=0),this.tweenProperty({displayObject:e,endValue:n,property:"alpha",startValue:e.alpha,totalFrames:t,type:"smoothstep",yoyo:!0})},e.prototype.slide=function(e,t,n,o,r,a,i){return void 0===o&&(o=60),void 0===r&&(r="smoothstep"),void 0===a&&(a=!1),void 0===i&&(i=0),this.makeTween([{delayBeforeRepeat:i,displayObject:e,endValue:t,property:"x",startValue:e.x,totalFrames:o,type:r,yoyo:a},{delayBeforeRepeat:i,displayObject:e,endValue:n,property:"y",startValue:e.y,totalFrames:o,type:r,yoyo:a}])},e.prototype.breathe=function(e,t,n,o,r,a){return void 0===t&&(t=.8),void 0===n&&(n=.8),void 0===o&&(o=60),void 0===r&&(r=!0),void 0===a&&(a=0),this._addScaleProperties(e),this.makeTween([{delayBeforeRepeat:a,displayObject:e,endValue:t,property:"scaleX",startValue:e.scale.x,totalFrames:o,type:"smoothstepSquared",yoyo:r},{delayBeforeRepeat:a,displayObject:e,endValue:n,property:"scaleY",startValue:e.scale.y,totalFrames:o,type:"smoothstepSquared",yoyo:r}])},e.prototype.scale=function(e,t,n,o){return void 0===t&&(t=.5),void 0===n&&(n=.5),void 0===o&&(o=60),this._addScaleProperties(e),this.makeTween([{displayObject:e,endValue:t,property:"scaleX",startValue:e.scale.x,totalFrames:o,type:"smoothstep",yoyo:!1},{displayObject:e,endValue:n,property:"scaleY",startValue:e.scale.y,totalFrames:o,type:"smoothstep",yoyo:!1}])},e.prototype.strobe=function(e,t,n,o,r,a,i){void 0===t&&(t=1.3),void 0===n&&(n=10),void 0===o&&(o=20),void 0===r&&(r=10),void 0===a&&(a=!0),void 0===i&&(i=0);var s="bounce "+n+" "+o;return this._addScaleProperties(e),this.makeTween([{delayBeforeRepeat:i,displayObject:e,endValue:t,property:"scaleX",startValue:e.scale.x,totalFrames:r,type:s,yoyo:!1},{delayBeforeRepeat:i,displayObject:e,endValue:t,property:"scaleY",startValue:e.scale.y,totalFrames:r,type:s,yoyo:a}])},e.prototype.wobble=function(e,t,n,o,r,a,i,s,p,u,l){var c=this;void 0===t&&(t=1.2),void 0===n&&(n=1.2),void 0===o&&(o=10),void 0===r&&(r=10),void 0===a&&(a=10),void 0===i&&(i=-10),void 0===s&&(s=-10),void 0===p&&(p=.98),void 0===u&&(u=!0),void 0===l&&(l=0);var d="bounce "+r+" "+a,y="bounce "+i+" "+s;this._addScaleProperties(e);var f=this.makeTween([{delayBeforeRepeat:l,displayObject:e,endValue:t,property:"scaleX",startValue:e.scale.x,totalFrames:o,type:d,yoyo:u},{delayBeforeRepeat:l,displayObject:e,endValue:n,property:"scaleY",startValue:e.scale.y,totalFrames:o,type:y,yoyo:u}]);return f.tweens.forEach(function(e){e.onCompleted=function(){e.endValue>1&&(e.endValue*=p,e.endValue<=1&&(e.endValue=1,c.removeTween(e)))}}),f},e.prototype.followCurve=function(e,t,n,o,r,a){var i=this;void 0===o&&(o="smoothstep"),void 0===r&&(r=!1),void 0===a&&(a=0);var s={},p=o.split(" ");return"bounce"===p[0]&&(s.startMagnitude=parseInt(p[1],10),s.endMagnitude=parseInt(p[2],10)),s.start=function(e){s.playing=!0,s.totalFrames=n,s.frameCounter=0,s.pointsArray=JSON.parse(JSON.stringify(e)),i.globalTweens.push(s)},s.start(t),s.update=function(){var t,n,r=s.pointsArray;s.playing&&(s.frameCounter<s.totalFrames?(t=s.frameCounter/s.totalFrames,n="bounce"!==p[0]?i.easingFormulas[o](t):i.easingFormulas.spline(t,s.startMagnitude,0,1,s.endMagnitude),e.x=i.easingFormulas.cubicBezier(n,r[0][0],r[1][0],r[2][0],r[3][0]),e.y=i.easingFormulas.cubicBezier(n,r[0][1],r[1][1],r[2][1],r[3][1]),s.frameCounter+=1):s.end())},s.end=function(){s.playing=!1,s.onCompleted&&s.onCompleted(),i.globalTweens.splice(i.globalTweens.indexOf(s),1),r&&i.wait(a).then(function(){s.pointsArray=s.pointsArray.reverse(),s.start(s.pointsArray)})},s.pause=function(){s.playing=!1},s.play=function(){s.playing=!0},s},e.prototype.walkPath=function(e,t,n,o,r,a,i){var s=this;void 0===n&&(n=300),void 0===o&&(o="smoothstep"),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=0);var p=JSON.parse(JSON.stringify(t)),u=n/p.length,l=0,c=function(t){var n=s.makeTween([{displayObject:e,endValue:p[l+1][0],property:"x",startValue:p[l][0],totalFrames:u,type:o},{displayObject:e,endValue:p[l+1][1],property:"y",startValue:p[l][1],totalFrames:u,type:o}]);return n.onCompleted=function(){l+=1,l<p.length-1?s.wait(i).then(function(){n=c(l)}):r&&(a&&p.reverse(),s.wait(i).then(function(){l=0,e.x=p[0][0],e.y=p[0][1],n=c(l)}))},n};return c(l)},e.prototype.walkCurve=function(e,t,n,o,r,a,i){var s=this;void 0===n&&(n=300),void 0===o&&(o="smoothstep"),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=0);var p=n/t.length,u=0,l=function(n){var c=s.followCurve(e,t[u],p,o);return c.onCompleted=function(){u+=1,u<t.length?s.wait(i).then(function(){c=l(u)}):r&&(a&&(t.reverse(),t.forEach(function(e){return e.reverse()})),s.wait(i).then(function(){u=0,e.x=t[0][0][0],e.y=t[0][0][1],c=l(u)}))},c};return l(u)},e.prototype.wait=function(e){return void 0===e&&(e=0),new Promise(function(t,n){setTimeout(t,e)})},e.prototype.removeTween=function(e){var t=this;e.tweens?(e.pause(),e.tweens.forEach(function(e){t.globalTweens.splice(t.globalTweens.indexOf(e),1)})):(e.pause(),-1!==this.globalTweens.indexOf(e)&&this.globalTweens.splice(this.globalTweens.indexOf(e),1))},e.prototype.update=function(){if(this.globalTweens.length>0)for(var e=this.globalTweens.length-1;e>=0;e--){var t=this.globalTweens[e];t&&t.update()}},e.prototype._addScaleProperties=function(e){"pixi"===this.renderer&&(!("scaleX"in e)&&"scale"in e&&"x"in e.scale&&Object.defineProperty(e,"scaleX",{get:function(){return e.scale.x},set:function(t){e.scale.x=t}}),!("scaleY"in e)&&"scale"in e&&"y"in e.scale&&Object.defineProperty(e,"scaleY",{get:function(){return e.scale.y},set:function(t){e.scale.y=t}}))},e}();t.Charm=o},function(t,n){t.exports=e},function(e,n){e.exports=t}])});